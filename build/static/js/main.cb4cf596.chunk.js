(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},23:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(16),c=n.n(u),o=n(17),l=n(2),i=(n(23),n(4)),m=n.n(i),s="/api/persons",d=function(){return m.a.get(s)},f=function(e){return m.a.post(s,e)},b=function(e){return m.a.delete("".concat(s,"/").concat(e))},v=function(e,t){return m.a.put("".concat(s,"/").concat(e),t)};var h=function(e){var t=e.textFilter,n=e.setTextFilter;return r.a.createElement(r.a.Fragment,null,"Filter names by:",r.a.createElement("input",{value:t,onChange:function(e){var t=e.target;return n(t.value)}}))},p=n(5);var E=function(e){var t=e.newPerson,n=e.setNewPerson,a=e.handleAddOrUpdate;return r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,"Name:",r.a.createElement("input",{value:t.name,onChange:function(e){var a=e.target;return n(Object(p.a)(Object(p.a)({},t),{},{name:a.value}))}})),r.a.createElement("div",null,"Number:",r.a.createElement("input",{value:t.number,onChange:function(e){var a=e.target;return n(Object(p.a)(Object(p.a)({},t),{},{number:a.value}))}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))};var O=function(e){var t=e.persons,n=e.textFilter,a=e.handleRemove;return r.a.createElement("div",null,t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){var t=e.id,n=e.name,u=e.number;return r.a.createElement("div",{key:n},n," ",u,r.a.createElement("button",{onClick:function(){return a(n,t)}},"Delete"))})))};var j=function(e){var t=e.message,n=e.error;return t?r.a.createElement("div",{className:n?"error":"notification"},t):null},w=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)({name:"",number:""}),i=Object(l.a)(c,2),m=i[0],s=i[1],p=Object(a.useState)(""),w=Object(l.a)(p,2),g=w[0],k=w[1],y=Object(a.useState)(null),F=Object(l.a)(y,2),x=F[0],S=F[1],C=Object(a.useState)(!1),N=Object(l.a)(C,2),T=N[0],A=N[1];Object(a.useEffect)((function(){P()}),[]);var P=function(){return d().then((function(e){return u(e.data)}))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(j,{error:T,message:x}),r.a.createElement(h,{textFilter:g,setTextFilter:k}),r.a.createElement("h3",null,"Add a new person"),r.a.createElement(E,{newPerson:m,setNewPerson:s,handleAddOrUpdate:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===m.name})),a=Object(l.a)(t,1)[0];a&&window.confirm("".concat(m.name," is already in the phonebook. Update the number?"))?v(a.id,m).then((function(e){e.data;S("".concat(m.name," updated!")),setTimeout((function(){return S(null)}),3e3),s({name:"",number:""}),P()})):f(m).then((function(e){var t=e.data;u([].concat(Object(o.a)(n),[t])),S("".concat(m.name," added!")),setTimeout((function(){return S(null)}),3e3),s({name:"",number:""})}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(O,{persons:n,textFilter:g,handleRemove:function(e,t){window.confirm("Are you sure you want to delete ".concat(e,"?"))&&b(t).then((function(){S("".concat(e," removed!")),setTimeout((function(){return S(null)}),3e3),s({name:"",number:""}),P()})).catch((function(){A(!0),S("".concat(e," has already been removed from the server!")),P(),setTimeout((function(){S(null),A(!1)}),3e3)}))}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.cb4cf596.chunk.js.map